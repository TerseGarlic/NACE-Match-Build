<Window x:Class="NACE_Match_Builder.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:conv="clr-namespace:NACE_Match_Builder.Converters"
        xmlns:models="clr-namespace:NACE_Match_Builder.Models"
        mc:Ignorable="d"
        Title="NACE Match Builder" Height="820" Width="1200">
    <Window.Resources>
        <conv:GameToModeVisibilityConverter x:Key="GameToModeVisibility" />
        <BooleanToVisibilityConverter x:Key="BoolToVis" />

        <!-- Color scheme -->
        <SolidColorBrush x:Key="PrimaryBg" Color="#1E1E1E"/>
        <SolidColorBrush x:Key="SecondaryBg" Color="#252526"/>
        <SolidColorBrush x:Key="AccentColor" Color="#007ACC"/>
        <SolidColorBrush x:Key="AccentColorLight" Color="#3D9CD9"/>
        <SolidColorBrush x:Key="TextColor" Color="#E6E6E6"/>
        <SolidColorBrush x:Key="BanColor" Color="#8B0000"/>
        <SolidColorBrush x:Key="PickColor" Color="#006400"/>
        <SolidColorBrush x:Key="ExportColor" Color="#605CA8"/>
        <SolidColorBrush x:Key="ClipboardColor" Color="#FF8C00"/>
        <SolidColorBrush x:Key="CoinGold" Color="#FFD700"/>
        <SolidColorBrush x:Key="ValorantRed" Color="#FA4454"/>

        <!-- Button styles -->
        <Style x:Key="DefaultButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource AccentColor}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="8,3"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.5"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource AccentColorLight}"/>
                    <Setter Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect ShadowDepth="1" BlurRadius="3" Color="#000000" Opacity="0.3"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="RenderTransform">
                        <Setter.Value>
                            <ScaleTransform ScaleX="0.98" ScaleY="0.98"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="BanButton" TargetType="Button" BasedOn="{StaticResource DefaultButton}">
            <Setter Property="Background" Value="{StaticResource BanColor}"/>
            <Setter Property="ToolTip" Value="Ban this map"/>
        </Style>

        <Style x:Key="PickButton" TargetType="Button" BasedOn="{StaticResource DefaultButton}">
            <Setter Property="Background" Value="{StaticResource PickColor}"/>
            <Setter Property="ToolTip" Value="Select this map"/>
        </Style>

        <Style x:Key="ExportButton" TargetType="Button" BasedOn="{StaticResource DefaultButton}">
            <Setter Property="Background" Value="{StaticResource ExportColor}"/>
            <Setter Property="ToolTip" Value="Export match to file"/>
        </Style>

        <Style x:Key="ClipboardButton" TargetType="Button" BasedOn="{StaticResource DefaultButton}">
            <Setter Property="Background" Value="{StaticResource ClipboardColor}"/>
            <Setter Property="ToolTip" Value="Copy match details to clipboard"/>
        </Style>

        <!-- Tab Style -->
        <Style x:Key="GameTabStyle" TargetType="TabItem">
            <Setter Property="Foreground" Value="{StaticResource TextColor}" />
            <Setter Property="Background" Value="{StaticResource SecondaryBg}" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Padding" Value="15,8" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="BorderThickness" Value="0" />
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{StaticResource AccentColor}" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- GroupBox styles -->
        <Style x:Key="ModernGroupBox" TargetType="GroupBox">
            <Setter Property="BorderBrush" Value="{StaticResource AccentColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GroupBox">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Border BorderBrush="{StaticResource AccentColor}" BorderThickness="0,0,0,1" Margin="0,0,0,5">
                                <TextBlock Text="{TemplateBinding Header}" FontWeight="Bold" Foreground="{StaticResource AccentColor}" 
                                           Padding="5,0,0,5" FontSize="14"/>
                            </Border>
                            <Border Grid.Row="1" Background="Transparent" BorderBrush="{TemplateBinding BorderBrush}" 
                                    BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3" Padding="{TemplateBinding Padding}">
                                <ContentPresenter />
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ValorantGroupBox style -->
        <Style x:Key="ValorantGroupBox" TargetType="GroupBox" BasedOn="{StaticResource ModernGroupBox}">
            <Setter Property="BorderBrush" Value="{StaticResource ValorantRed}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GroupBox">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Border BorderBrush="{StaticResource ValorantRed}" BorderThickness="0,0,0,1" Margin="0,0,0,5">
                                <TextBlock Text="{TemplateBinding Header}" FontWeight="Bold" Foreground="{StaticResource ValorantRed}" 
                                           Padding="5,0,0,5" FontSize="14"/>
                            </Border>
                            <Border Grid.Row="1" Background="Transparent" BorderBrush="{TemplateBinding BorderBrush}" 
                                    BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3" Padding="{TemplateBinding Padding}">
                                <ContentPresenter />
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- FadeIn Animation -->
        <Storyboard x:Key="FadeIn">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0.0" To="1.0" Duration="0:0:0.3"/>
        </Storyboard>

        <!-- Tooltip style -->
        <Style TargetType="ToolTip">
            <Setter Property="Background" Value="{StaticResource SecondaryBg}"/>
            <Setter Property="Foreground" Value="{StaticResource TextColor}"/>
            <Setter Property="BorderBrush" Value="{StaticResource AccentColor}"/>
        </Style>
    </Window.Resources>

    <!-- Apply dark theme to window -->
    <Window.Background>
        <SolidColorBrush Color="#1E1E1E"/>
    </Window.Background>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Game Selection Tab Control -->
        <TabControl x:Name="GameTabControl" Grid.Row="0" Background="Transparent" BorderThickness="0" Margin="0,0,0,10" 
                    SelectionChanged="GameTabControl_SelectionChanged">
            <TabItem Header="Call of Duty" Style="{StaticResource GameTabStyle}" Tag="{x:Static models:GameTitle.CallOfDuty}"/>
            <TabItem Header="Valorant" Style="{StaticResource GameTabStyle}" Tag="{x:Static models:GameTitle.Valorant}"/>
        </TabControl>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="310" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Left panel with setup controls -->
            <StackPanel Margin="0,0,15,0">
                <TextBlock x:Name="GameTitleText" Text="Call of Duty Match Builder" FontSize="22" FontWeight="Bold" Foreground="{StaticResource AccentColor}" Margin="0,0,0,5"/>
                <Separator Background="{StaticResource AccentColorLight}" Margin="0,5,0,10" />
                <TextBlock Text="School 1" FontStyle="Italic" Foreground="{StaticResource TextColor}"/>
                <TextBox Text="{Binding School1Name}" Width="260" Margin="0,3,0,0" />
                <TextBlock Text="School 2" FontStyle="Italic" Margin="0,10,0,0" Foreground="{StaticResource TextColor}"/>
                <TextBox Text="{Binding School2Name}" Width="260" Margin="0,3,0,0" />

                <!-- Coin Flip Section -->
                <Grid>
                    <StackPanel>
                        <TextBlock Text="Choose Winner's Side:" Margin="0,10,0,5" Foreground="{StaticResource TextColor}"/>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <RadioButton x:Name="NACERadio" Content="NACE" GroupName="CoinSide" IsChecked="True" Margin="0,0,20,0" Foreground="{StaticResource TextColor}"/>
                            <RadioButton x:Name="CODRadio" Content="COD" GroupName="CoinSide" Foreground="{StaticResource TextColor}" Visibility="{Binding ElementName=GameTabControl, Path=SelectedIndex, Converter={StaticResource GameToModeVisibility}}"/>
                            <RadioButton x:Name="ValorantRadio" Content="Valorant" GroupName="CoinSide" Foreground="{StaticResource TextColor}" Visibility="{Binding ElementName=GameTabControl, Path=SelectedIndex, Converter={StaticResource GameToModeVisibility}, ConverterParameter=Valorant}"/>
                        </StackPanel>

                        <Button x:Name="CoinFlipButton" Content="Flip Coin" Margin="0,5,0,0" Command="{Binding CoinFlipCommand}" Width="120" Style="{StaticResource DefaultButton}" 
                                ToolTip="Randomly select a winner between the two schools" Click="CoinFlipButton_Click"/>

                        <TextBlock x:Name="CoinFlipStatus" Margin="0,10,0,0" Foreground="{StaticResource AccentColorLight}" 
                                   FontWeight="SemiBold" HorizontalAlignment="Center">
                            <TextBlock.RenderTransform>
                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                            </TextBlock.RenderTransform>
                        </TextBlock>
                    </StackPanel>

                    <!-- Coin Animation Overlay -->
                    <Grid x:Name="CoinEllipse" Width="80" Height="80" 
                          Visibility="{Binding IsCoinVisible, Converter={StaticResource BoolToVis}}" 
                          HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,-30,0,0">
                        <Grid.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform/>
                                <SkewTransform/>
                                <RotateTransform/>
                                <TranslateTransform/>
                            </TransformGroup>
                        </Grid.RenderTransform>

                        <!-- Coin shadow -->
                        <Ellipse x:Name="CoinShadow" Width="60" Height="15" Fill="#40000000" VerticalAlignment="Bottom" Margin="0,0,0,-15">
                            <Ellipse.RenderTransform>
                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                            </Ellipse.RenderTransform>
                        </Ellipse>

                        <!-- Heads side (Front) -->
                        <Grid x:Name="HeadsSide">
                            <Ellipse x:Name="HeadsSideEllipse" Width="80" Height="80" Fill="{StaticResource CoinGold}" Stroke="DarkGoldenrod" StrokeThickness="2">
                                <Ellipse.Effect>
                                    <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="3" Opacity="0.5"/>
                                </Ellipse.Effect>
                            </Ellipse>
                            <TextBlock x:Name="HeadsSideText" Text="NACE" HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="Bold" 
                                      FontSize="16" Foreground="DarkGoldenrod"/>
                            <Ellipse Width="76" Height="76" Stroke="White" StrokeThickness="1" Opacity="0.3"/>
                        </Grid>

                        <!-- Tails side (Back) -->
                        <Grid x:Name="TailsSide" Visibility="Hidden">
                            <Ellipse x:Name="TailsSideEllipse" Width="80" Height="80" Fill="#B8860B" Stroke="DarkGoldenrod" StrokeThickness="2">
                                <Ellipse.Effect>
                                    <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="3" Opacity="0.5"/>
                                </Ellipse.Effect>
                            </Ellipse>
                            <TextBlock x:Name="TailsSideText" Text="COD" HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="Bold" 
                                      FontSize="16" Foreground="#FFD700"/>
                            <Ellipse Width="76" Height="76" Stroke="White" StrokeThickness="1" Opacity="0.3"/>
                        </Grid>

                        <!-- Shimmer effect overlay -->
                        <Ellipse x:Name="CoinShimmer" Width="80" Height="80" Opacity="0">
                            <Ellipse.Fill>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#00FFFFFF" Offset="0.0"/>
                                    <GradientStop Color="#80FFFFFF" Offset="0.5"/>
                                    <GradientStop Color="#00FFFFFF" Offset="1.0"/>
                                </LinearGradientBrush>
                            </Ellipse.Fill>
                        </Ellipse>

                        <!-- Glow effect for the result reveal -->
                        <Ellipse x:Name="CoinGlowEffect" Width="100" Height="100" Opacity="0">
                            <Ellipse.Fill>
                                <RadialGradientBrush>
                                    <GradientStop Color="#FFFFE500" Offset="0.0"/>
                                    <GradientStop Color="#60FFD700" Offset="0.5"/>
                                    <GradientStop Color="#00FFD700" Offset="1.0"/>
                                </RadialGradientBrush>
                            </Ellipse.Fill>
                        </Ellipse>
                    </Grid>
                </Grid>

                <TextBlock Text="Winner:" Margin="0,10,0,0" Foreground="{StaticResource TextColor}"/>
                <TextBlock Text="{Binding CoinFlipWinner}" FontWeight="Bold" Foreground="{StaticResource AccentColorLight}"/>
                <StackPanel Margin="0,10,0,0" Visibility="{Binding ShowAssignRosters, Converter={StaticResource BoolToVis}}">
                    <TextBlock Text="Assign Rosters" FontWeight="Bold" Foreground="{StaticResource AccentColorLight}"/>
                    <TextBlock Text="Roster A" FontStyle="Italic" Margin="0,5,0,0" Foreground="{StaticResource TextColor}"/>
                    <ComboBox Width="200" ItemsSource="{Binding Teams}" SelectedItem="{Binding RosterA}" />
                    <TextBlock Text="Roster B" FontStyle="Italic" Margin="0,5,0,0" Foreground="{StaticResource TextColor}"/>
                    <ComboBox Width="200" ItemsSource="{Binding Teams}" SelectedItem="{Binding RosterB}" />
                    <Button Content="Start Pick/Ban" Margin="0,15,0,0" Width="140" Command="{Binding StartSequenceCommand}" Style="{StaticResource DefaultButton}"
                            ToolTip="Begin the map pick/ban sequence"/>
                </StackPanel>
                <Separator Background="{StaticResource AccentColorLight}" Margin="0,15,0,10" />
                <TextBlock Text="Sequence Status" FontWeight="Bold" Foreground="{StaticResource AccentColorLight}"/>
                <TextBlock Text="{Binding CurrentCodPrompt}" FontSize="13" FontWeight="SemiBold" Margin="0,5,0,0" Foreground="{StaticResource TextColor}"/>
                <TextBlock Text="{Binding Status}" TextWrapping="Wrap" Width="280" Margin="0,5,0,0" Foreground="{StaticResource TextColor}"/>
                <WrapPanel Margin="0,15,0,0">
                    <Button Content="Undo" Command="{Binding UndoCommand}" Width="70" Margin="0,0,5,0" Style="{StaticResource DefaultButton}"
                            ToolTip="Undo last action"/>
                    <Button Content="Reset" Command="{Binding ResetCommand}" Width="70" Style="{StaticResource DefaultButton}"
                            ToolTip="Reset to initial state"/>
                </WrapPanel>
                <Button Content="Build Match" Command="{Binding BuildMatchCommand}" Margin="0,15,0,0" Width="140" Style="{StaticResource DefaultButton}"
                        ToolTip="Build the final match with the selected maps"/>

                <!-- Export options -->
                <Border Background="{StaticResource SecondaryBg}" CornerRadius="3" Padding="10" Margin="0,15,0,0" BorderBrush="#3F3F3F" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Export Options" FontWeight="Bold" Foreground="{StaticResource AccentColorLight}" Margin="0,0,0,10"/>
                        <WrapPanel>
                            <Button Content="Save to File" Width="120" Command="{Binding ExportMatchCommand}" Style="{StaticResource ExportButton}" Margin="0,0,10,0"/>
                            <Button Content="Copy to Clipboard" Width="120" Command="{Binding CopyToClipboardCommand}" Style="{StaticResource ClipboardButton}"/>
                        </WrapPanel>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Content for Call of Duty -->
            <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" 
                         Visibility="{Binding ElementName=GameTabControl, Path=SelectedIndex, Converter={StaticResource GameToModeVisibility}}">
                <StackPanel>
                    <!-- Hardpoint section -->
                    <GroupBox Header="Hardpoint" Style="{StaticResource ModernGroupBox}">
                        <StackPanel>
                            <ItemsControl ItemsSource="{Binding HardpointRemaining}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <DockPanel Margin="3">
                                            <TextBlock Text="{Binding .}" Width="140" Foreground="{StaticResource TextColor}" VerticalAlignment="Center"/>
                                            <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                                                <Button Content="Ban" Width="50" Margin="2,0" 
                                                        Command="{Binding DataContext.BanCommand, RelativeSource={RelativeSource AncestorType=GroupBox}}" 
                                                        CommandParameter="{Binding .}" 
                                                        Style="{StaticResource BanButton}"/>
                                                <Button Content="Pick" Width="50" Margin="2,0" 
                                                        Command="{Binding DataContext.PickCommand, RelativeSource={RelativeSource AncestorType=GroupBox}}" 
                                                        CommandParameter="{Binding .}" 
                                                        Style="{StaticResource PickButton}"/>
                                            </StackPanel>
                                        </DockPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                            <UniformGrid Columns="2" Margin="0,10,0,0">
                                <StackPanel Margin="3">
                                    <TextBlock Text="Map1" Foreground="{StaticResource AccentColorLight}"/>
                                    <TextBlock Text="{Binding HpMap1}" FontWeight="Bold" Foreground="{StaticResource TextColor}"/>
                                </StackPanel>
                                <StackPanel Margin="3">
                                    <TextBlock Text="Map4" Foreground="{StaticResource AccentColorLight}"/>
                                    <TextBlock Text="{Binding HpMap4}" FontWeight="Bold" Foreground="{StaticResource TextColor}"/>
                                </StackPanel>
                            </UniformGrid>
                        </StackPanel>
                    </GroupBox>

                    <!-- Search & Destroy section -->
                    <GroupBox Header="Search &amp; Destroy" Style="{StaticResource ModernGroupBox}">
                        <StackPanel>
                            <ItemsControl ItemsSource="{Binding SndRemaining}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <DockPanel Margin="3">
                                            <TextBlock Text="{Binding .}" Width="140" Foreground="{StaticResource TextColor}" VerticalAlignment="Center"/>
                                            <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                                                <Button Content="Ban" Width="50" Margin="2,0" 
                                                        Command="{Binding DataContext.BanCommand, RelativeSource={RelativeSource AncestorType=GroupBox}}" 
                                                        CommandParameter="{Binding .}" 
                                                        Style="{StaticResource BanButton}"/>
                                                <Button Content="Pick" Width="50" Margin="2,0" 
                                                        Command="{Binding DataContext.PickCommand, RelativeSource={RelativeSource AncestorType=GroupBox}}" 
                                                        CommandParameter="{Binding .}" 
                                                        Style="{StaticResource PickButton}"/>
                                            </StackPanel>
                                        </DockPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                            <UniformGrid Columns="2" Margin="0,10,0,0">
                                <StackPanel Margin="3">
                                    <TextBlock Text="Map2" Foreground="{StaticResource AccentColorLight}"/>
                                    <TextBlock Text="{Binding SndMap2}" FontWeight="Bold" Foreground="{StaticResource TextColor}"/>
                                </StackPanel>
                                <StackPanel Margin="3">
                                    <TextBlock Text="Map5" Foreground="{StaticResource AccentColorLight}"/>
                                    <TextBlock Text="{Binding SndMap5}" FontWeight="Bold" Foreground="{StaticResource TextColor}"/>
                                </StackPanel>
                            </UniformGrid>
                        </StackPanel>
                    </GroupBox>

                    <!-- Control section -->
                    <GroupBox Header="Control" Style="{StaticResource ModernGroupBox}">
                        <StackPanel>
                            <ItemsControl ItemsSource="{Binding ControlRemaining}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <DockPanel Margin="3">
                                            <TextBlock Text="{Binding .}" Width="140" Foreground="{StaticResource TextColor}" VerticalAlignment="Center"/>
                                            <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                                                <Button Content="Ban" Width="50" Margin="2,0" 
                                                        Command="{Binding DataContext.BanCommand, RelativeSource={RelativeSource AncestorType=GroupBox}}" 
                                                        CommandParameter="{Binding .}" 
                                                        Style="{StaticResource BanButton}"/>
                                                <Button Content="Pick" Width="50" Margin="2,0" 
                                                        Command="{Binding DataContext.PickCommand, RelativeSource={RelativeSource AncestorType=GroupBox}}" 
                                                        CommandParameter="{Binding .}" 
                                                        Style="{StaticResource PickButton}"/>
                                            </StackPanel>
                                        </DockPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                            <StackPanel Margin="3,10,0,0">
                                <TextBlock Text="Map3" Foreground="{StaticResource AccentColorLight}"/>
                                <TextBlock Text="{Binding ControlMap3}" FontWeight="Bold" Foreground="{StaticResource TextColor}"/>
                            </StackPanel>
                        </StackPanel>
                    </GroupBox>

                    <!-- Side Selection section -->
                    <GroupBox Header="Side Selection" Style="{StaticResource ModernGroupBox}" Visibility="{Binding IsSideSelection, Converter={StaticResource BoolToVis}}">
                        <StackPanel>
                            <WrapPanel>
                                <ItemsControl ItemsSource="{Binding SideOptions}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <RadioButton Content="{Binding .}" GroupName="Sides" Margin="5,0,10,0"
                                                         Command="{Binding DataContext.SideCommand, RelativeSource={RelativeSource AncestorType=GroupBox}}"
                                                         CommandParameter="{Binding .}"
                                                         Foreground="{StaticResource TextColor}"/>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </WrapPanel>
                            <TextBlock Text="Click a side to apply for the current map step." FontStyle="Italic" Margin="0,5,0,0" 
                                       Foreground="{StaticResource TextColor}" Opacity="0.7"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- Current Rotation section -->
                    <GroupBox Header="Current Rotation &amp; Sides" Style="{StaticResource ModernGroupBox}">
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="3" Padding="8">
                            <UniformGrid Columns="5" Margin="0,5,0,0">
                                <Border BorderThickness="0,0,1,0" BorderBrush="#3F3F3F" Margin="0,0,5,0">
                                    <StackPanel>
                                        <TextBlock Text="M1 HP" FontWeight="Bold" Foreground="{StaticResource AccentColorLight}"/>
                                        <TextBlock Text="{Binding HpMap1}" Foreground="{StaticResource TextColor}"/>
                                        <TextBlock Text="{Binding Hp1Sides}" TextWrapping="Wrap" FontSize="11" Foreground="#B0B0B0"/>
                                    </StackPanel>
                                </Border>
                                <Border BorderThickness="0,0,1,0" BorderBrush="#3F3F3F" Margin="0,0,5,0">
                                    <StackPanel>
                                        <TextBlock Text="M2 SnD" FontWeight="Bold" Foreground="{StaticResource AccentColorLight}"/>
                                        <TextBlock Text="{Binding SndMap2}" Foreground="{StaticResource TextColor}"/>
                                        <TextBlock Text="{Binding Snd2Sides}" TextWrapping="Wrap" FontSize="11" Foreground="#B0B0B0"/>
                                    </StackPanel>
                                </Border>
                                <Border BorderThickness="0,0,1,0" BorderBrush="#3F3F3F" Margin="0,0,5,0">
                                    <StackPanel>
                                        <TextBlock Text="M3 CTRL" FontWeight="Bold" Foreground="{StaticResource AccentColorLight}"/>
                                        <TextBlock Text="{Binding ControlMap3}" Foreground="{StaticResource TextColor}"/>
                                        <TextBlock Text="{Binding Control3Sides}" TextWrapping="Wrap" FontSize="11" Foreground="#B0B0B0"/>
                                    </StackPanel>
                                </Border>
                                <Border BorderThickness="0,0,1,0" BorderBrush="#3F3F3F" Margin="0,0,5,0">
                                    <StackPanel>
                                        <TextBlock Text="M4 HP" FontWeight="Bold" Foreground="{StaticResource AccentColorLight}"/>
                                        <TextBlock Text="{Binding HpMap4}" Foreground="{StaticResource TextColor}"/>
                                        <TextBlock Text="{Binding Hp4Sides}" TextWrapping="Wrap" FontSize="11" Foreground="#B0B0B0"/>
                                    </StackPanel>
                                </Border>
                                <StackPanel>
                                    <TextBlock Text="M5 SnD" FontWeight="Bold" Foreground="{StaticResource AccentColorLight}"/>
                                    <TextBlock Text="{Binding SndMap5}" Foreground="{StaticResource TextColor}"/>
                                    <TextBlock Text="{Binding Snd5Sides}" TextWrapping="Wrap" FontSize="11" Foreground="#B0B0B0"/>
                                </StackPanel>
                            </UniformGrid>
                        </Border>
                    </GroupBox>
                </StackPanel>
            </ScrollViewer>

            <!-- Content for Valorant -->
            <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" 
             Visibility="{Binding ElementName=GameTabControl, Path=SelectedIndex, Converter={StaticResource GameToModeVisibility}, ConverterParameter=Valorant}">
                <StackPanel>
                    <!-- Valorant Map Selection -->
                    <GroupBox Header="Valorant Maps" Style="{StaticResource ValorantGroupBox}">
                        <StackPanel>
                            <ItemsControl ItemsSource="{Binding ValorantRemaining}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <DockPanel Margin="3">
                                            <TextBlock Text="{Binding .}" Width="140" Foreground="{StaticResource TextColor}" VerticalAlignment="Center"/>
                                            <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                                                <Button Content="Ban" Width="50" Margin="2,0" 
                                            Command="{Binding DataContext.ValorantBanCommand, RelativeSource={RelativeSource AncestorType=GroupBox}}" 
                                            CommandParameter="{Binding .}" 
                                            Style="{StaticResource BanButton}"/>
                                                <Button Content="Pick" Width="50" Margin="2,0" 
                                            Command="{Binding DataContext.ValorantPickCommand, RelativeSource={RelativeSource AncestorType=GroupBox}}" 
                                            CommandParameter="{Binding .}" 
                                            Style="{StaticResource PickButton}"/>
                                            </StackPanel>
                                        </DockPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </GroupBox>

                    <!-- Side Selection for Valorant -->
                    <GroupBox Header="Side Selection" Style="{StaticResource ValorantGroupBox}" 
                 Visibility="{Binding IsValorantSideSelection, Converter={StaticResource BoolToVis}}">
                        <StackPanel>
                            <WrapPanel>
                                <ItemsControl ItemsSource="{Binding ValorantSideOptions}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <RadioButton Content="{Binding .}" GroupName="ValorantSides" Margin="5,0,10,0"
                                             Command="{Binding DataContext.ValorantSideCommand, RelativeSource={RelativeSource AncestorType=GroupBox}}"
                                             CommandParameter="{Binding .}"
                                             Foreground="{StaticResource TextColor}"/>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </WrapPanel>
                            <TextBlock Text="Click a side to apply for the current map." FontStyle="Italic" Margin="0,5,0,0" 
                           Foreground="{StaticResource TextColor}" Opacity="0.7"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- Selected Maps Display -->
                    <GroupBox Header="Selected Valorant Maps" Style="{StaticResource ValorantGroupBox}">
                        <Border Background="{StaticResource SecondaryBg}" CornerRadius="3" Padding="8">
                            <UniformGrid Columns="3" Margin="0,5,0,0">
                                <Border BorderThickness="0,0,1,0" BorderBrush="#3F3F3F" Margin="0,0,5,0">
                                    <StackPanel>
                                        <TextBlock Text="Map 1" FontWeight="Bold" Foreground="{StaticResource ValorantRed}"/>
                                        <TextBlock Text="{Binding ValMap1}" Foreground="{StaticResource TextColor}"/>
                                        <TextBlock Text="{Binding Val1Sides}" TextWrapping="Wrap" FontSize="11" Foreground="#B0B0B0"/>
                                    </StackPanel>
                                </Border>
                                <Border BorderThickness="0,0,1,0" BorderBrush="#3F3F3F" Margin="0,0,5,0">
                                    <StackPanel>
                                        <TextBlock Text="Map 2" FontWeight="Bold" Foreground="{StaticResource ValorantRed}"/>
                                        <TextBlock Text="{Binding ValMap2}" Foreground="{StaticResource TextColor}"/>
                                        <TextBlock Text="{Binding Val2Sides}" TextWrapping="Wrap" FontSize="11" Foreground="#B0B0B0"/>
                                    </StackPanel>
                                </Border>
                                <StackPanel>
                                    <TextBlock Text="Map 3" FontWeight="Bold" Foreground="{StaticResource ValorantRed}"/>
                                    <TextBlock Text="{Binding ValMap3}" Foreground="{StaticResource TextColor}"/>
                                    <TextBlock Text="{Binding Val3Sides}" TextWrapping="Wrap" FontSize="11" Foreground="#B0B0B0"/>
                                </StackPanel>
                            </UniformGrid>
                        </Border>
                    </GroupBox>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Grid>
</Window>
